{% set current_path = request.url.path if request else "" %}
<nav class="navbar">
    <div class="nav-inner">
        <a href="/" class="nav-brand">
            Flash Blog
            <span class="nav-badge">Example</span>
        </a>

        <div class="nav-links">
            <a
                href="/"
                class="nav-link{% if current_path == '/' %} active{% endif %}"
            >Home</a>
            <a
                href="/articles/"
                class="nav-link{% if current_path.startswith('/articles') %} active{% endif %}"
            >Articles</a>
            <a
                href="/about"
                class="nav-link{% if current_path.startswith('/about') %} active{% endif %}"
            >About</a>
            <a
                href="/forms"
                class="nav-link{% if current_path.startswith('/forms') %} active{% endif %}"
            >Forms</a>
        </div>

        <div class="nav-actions">
            {% if user and user.is_active %}
                <a href="/articles/new" class="btn">Write</a>
                <details class="menu">
                    <summary class="menu-trigger">
                        {{ user.username }}
                        â–¾
                    </summary>
                    <div class="menu-content">
                        {% if user.is_staff %}
                            <a href="/admin/dashboard" class="menu-item">Admin dashboard</a>
                            <a href="/admin/moderation" class="menu-item">Moderation</a>
                            {% if user.is_superuser %}
                                <a href="/admin/users" class="menu-item">User management</a>
                            {% endif %}
                            <div class="menu-divider"></div>
                        {% endif %}
                        <a href="/articles/?status=draft" class="menu-item">Your drafts</a>
                        <a href="/articles/" class="menu-item">All articles</a>
                        <div class="menu-divider"></div>
                        <a href="/logout" class="menu-item">Sign out</a>
                    </div>
                </details>
            {% else %}
                <a href="/login" class="btn btn-ghost">Login</a>
                <a href="/register" class="btn">Register</a>
            {% endif %}
        </div>
    </div>
</nav>
